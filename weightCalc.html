<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Barbell Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #3b82f6;
      color: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-size: 20px;
      margin: 0;
    }
    header button {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      margin-left: 15px;
    }
    header button:hover {
      color: #dbeafe;
    }
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 30px;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 100%;
      max-width: 500px;
      margin-bottom: 20px;
      box-sizing: border-box; /* Ensure padding is included in width */
    }
    .card h2 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #334e68;
    }
    input, select, button {
      width: calc(100% - 24px); /* Adjust width to fit within padding */
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      transition: all 0.3s ease;
      box-sizing: border-box; /* Include padding and border in width */
    }
    input:focus, select:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
    }
    button {
      background: #3b82f6;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease; /* Add smooth transitions */
    }
    button:hover {
      background: #2563eb;
      transform: scale(1.05); /* Slightly enlarge buttons on hover */
    }
    .barbell-visual {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: nowrap;
    }
    .plate-visual {
      position: relative;
      height: 50px;
      background: #3b82f6;
      margin: 0 2px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: bold;
      transition: transform 0.3s ease, background 0.3s ease; /* Add smooth animations */
    }
    .plate-visual:hover {
      transform: scale(1.1); /* Slightly enlarge plates on hover */
      background: #2563eb; /* Change color on hover */
    }
    .bar {
      width: 200px;
      height: 10px;
      background: #555;
      margin: 0 10px;
      flex-shrink: 0;
    }
    footer {
      background: #f3f4f6;
      text-align: center;
      padding: 10px;
      font-size: 14px;
      color: #6b7280;
    }
    .inventory-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: #f9fafb;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .inventory-item span {
      font-weight: bold;
      color: #374151;
      flex: 1;
    }
    .adjust-button {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: bold;
      transition: transform 0.2s ease; /* Add smooth animation */
    }
    .adjust-button:hover {
      transform: scale(1.1); /* Slightly enlarge the button on hover */
    }
    #plateList {
      max-height: none; /* Remove height restriction */
      overflow: visible; /* Allow all items to be visible */
      margin-bottom: 15px;
      padding-right: 5px;
    }
    #plateList::-webkit-scrollbar {
      width: 6px;
    }
    #plateList::-webkit-scrollbar-thumb {
      background: #d1d5db;
      border-radius: 3px;
    }
    #plateList::-webkit-scrollbar-thumb:hover {
      background: #9ca3af;
    }
    .small-button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    .small-button:hover {
      background: #2563eb;
    }
    .reset-button {
      background: #ef4444;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
    }
    .reset-button:hover {
      background: #dc2626;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.3s ease, transform 0.3s ease; /* Smooth fade-in and slide-in */
      opacity: 0;
      transform: translateY(-20px);
    }
    .overlay[style*="display: flex"] {
      opacity: 1;
      transform: translateY(0);
    }
    .overlay .card {
      max-width: 400px;
      width: 90%;
    }
    #weightInput {
      font-size: 36px; /* Make the font size large */
      font-weight: bold; /* Make the text bold */
      text-align: center; /* Center the text */
      border: 2px solid #3b82f6; /* Add a thicker border */
      box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3); /* Add a subtle shadow */
      transition: transform 0.3s ease, box-shadow 0.3s ease; /* Add smooth transitions */
    }
    #weightInput:focus {
      transform: scale(1.05); /* Slightly enlarge on focus */
      box-shadow: 0 6px 15px rgba(59, 130, 246, 0.5); /* Enhance shadow on focus */
    }
    /* Dark mode styles */
    body.dark-mode {
      background: linear-gradient(135deg, #1e293b, #0f172a);
      color: #e5e7eb;
    }
    header.dark-mode {
      background: #1e40af;
    }
    .card.dark-mode {
      background: #1e293b;
      color: #e5e7eb;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }
    input.dark-mode, select.dark-mode, button.dark-mode {
      background: #374151;
      color: #e5e7eb;
      border: 1px solid #4b5563;
    }
    input.dark-mode:focus, select.dark-mode:focus {
      border-color: #2563eb;
      box-shadow: 0 0 5px rgba(37, 99, 235, 0.5);
    }
    button.dark-mode {
      background: #2563eb;
    }
    button.dark-mode:hover {
      background: #1d4ed8;
    }
    footer.dark-mode {
      background: #1f2937;
      color: #9ca3af;
    }
    .overlay.dark-mode {
      background: rgba(0, 0, 0, 0.8);
    }
    .plate-visual.dark-mode {
      background: #2563eb;
    }
    .plate-visual.dark-mode:hover {
      background: #1d4ed8;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 24px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #3b82f6;
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
  </style>
</head>
<body>

<header>
  <h1>Barbell Calculator</h1>
</header>

<div class="main">
  <div style="display: flex; justify-content: flex-end; gap: 15px; margin-bottom: 20px; width: 100%; max-width: 800px;">
    <button class="small-button" style="padding: 10px 15px; font-size: 18px;" onclick="toggleOverlay('inventoryOverlay')">üéí</button>
    <button class="small-button" style="padding: 10px 15px; font-size: 18px;" onclick="toggleOverlay('settingsOverlay')">‚öôÔ∏è</button>
  </div>

  <div id="settingsOverlay" class="overlay">
    <div class="card">
      <h2>Bar Options</h2>
      <select id="barbellSelect" onchange="calculatePlates()">
        <option value="45">Standard Bar (45 lbs)</option>
        <option value="35">Women's Bar (35 lbs)</option>
        <option value="15">Training Bar (15 lbs)</option>
      </select>
      <label style="display: flex; align-items: center; margin-top: 20px;">
        <span style="margin-right: 10px;">Dark Mode</span>
        <div class="toggle-switch">
          <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
          <span class="slider"></span>
        </div>
      </label>
      <button class="small-button" style="margin-top: 20px;" onclick="toggleOverlay('settingsOverlay'); calculatePlates();">Apply</button>
    </div>
  </div>

  <div id="inventoryOverlay" class="overlay">
    <div class="card">
      <h2>Plate Inventory</h2>
      <div id="plateList">
        <!-- Inventory items will be dynamically populated here -->
      </div>
      <div class="inventory-item">
        <input type="number" id="newPlateInput" placeholder="Add another">
        <button class="small-button" onclick="addPlate()">Add</button>
      </div>
      <button class="reset-button" onclick="resetPlates()">Clear Inventory</button>
      <button class="small-button" style="margin-top: 20px;" onclick="toggleOverlay('inventoryOverlay')">Close</button>
    </div>
  </div>

  <div class="card">
    <h2>Target Weight</h2>
    <input type="number" id="weightInput" placeholder="Enter target weight (lbs)" value="45" oninput="calculatePlates()">
  </div>

  <div class="card">
    <h2>Results</h2>
    <div class="barbell-visual" id="barbellVisual"></div>
    <div id="platesOutput"></div>
  </div>
</div>

<footer>
  Made by Jasper Pell
</footer>

<script>
let availablePlates = [
  { weight: 45, count: 4 },
  { weight: 35, count: 2 },
  { weight: 25, count: 2 },
  { weight: 10, count: 4 },
  { weight: 5, count: 4 },
  { weight: 2.5, count: 2 }
];

function toggleOverlay(overlayId) {
  const overlay = document.getElementById(overlayId);
  overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
}

function calculatePlates() {
  const targetWeight = Number(document.getElementById('weightInput').value);
  const barbellWeight = Number(document.getElementById('barbellSelect').value);
  const output = document.getElementById('platesOutput');
  const visual = document.getElementById('barbellVisual');

  output.innerHTML = '';
  visual.innerHTML = '';

  if (availablePlates.length === 0) {
    output.innerHTML = '<div>‚ö†Ô∏è Add plates to the inventory first.</div>';
    return;
  }

  let remaining = targetWeight - barbellWeight;
  if (remaining < 0) {
    output.innerHTML = '<div>‚ö†Ô∏è Target weight must be greater than bar weight.</div>';
    return;
  }

  const result = [];
  const visualPlates = [];
  for (let plate of availablePlates) {
    let maxPairs = Math.floor(plate.count / 2);
    let neededPairs = Math.floor(remaining / (plate.weight * 2));
    let usePairs = Math.min(maxPairs, neededPairs);
    if (usePairs > 0) {
      for (let i = 0; i < usePairs; i++) {
        visualPlates.push(plate.weight);
      }
      remaining -= usePairs * plate.weight * 2;
    }
  }

  if (remaining > 0.5) {
    result.push('<div>‚ö†Ô∏è Remaining weight cannot be matched exactly with available plates.</div>');
  }

  const leftSide = [...visualPlates];
  const rightSide = [...visualPlates];

  leftSide.reverse().forEach(weight => {
    const plate = document.createElement('div');
    plate.className = 'plate-visual';
    plate.style.width = (20 + weight / 2) + 'px';
    plate.innerText = weight;
    visual.appendChild(plate);
  });

  const bar = document.createElement('div');
  bar.className = 'bar';
  visual.appendChild(bar);

  rightSide.forEach(weight => {
    const plate = document.createElement('div');
    plate.className = 'plate-visual';
    plate.style.width = (20 + weight / 2) + 'px';
    plate.innerText = weight;
    visual.appendChild(plate);
  });

  output.innerHTML = result.join('');
}

function updatePlateList() {
  const plateList = document.getElementById('plateList');
  plateList.innerHTML = '';
  availablePlates.sort((a, b) => b.weight - a.weight);
  availablePlates.forEach((plate, index) => {
    const div = document.createElement('div');
    div.className = 'inventory-item';
    div.style.display = 'flex';
    div.style.alignItems = 'center';
    div.style.marginBottom = '10px';
    div.innerHTML = `
      <span style="flex: 1; font-weight: bold;">${plate.weight} lbs (x${plate.count})</span>
      <button class="adjust-button decrease-button" onclick="decreasePlate(${index})" style="background: #ef4444; color: white; border: none; width: 30px; height: 30px; border-radius: 4px; cursor: pointer;">-</button>
      <button class="adjust-button increase-button" onclick="increasePlate(${index})" style="background: #10b981; color: white; border: none; width: 30px; height: 30px; border-radius: 4px; cursor: pointer;">+</button>
    `;
    plateList.appendChild(div);
  });
}

// Ensure the plate inventory is populated on page load
document.addEventListener('DOMContentLoaded', () => {
  updatePlateList();
  calculatePlates(); // Calculate the result at the beginning
});

function addPlate() {
  const newPlateInput = document.getElementById('newPlateInput');
  const plateValue = Number(newPlateInput.value);
  if (plateValue > 0) {
    const existingPlate = availablePlates.find(p => p.weight === plateValue);
    if (existingPlate) {
      existingPlate.count++;
    } else {
      availablePlates.push({ weight: plateValue, count: 1 });
    }
    updatePlateList();
    newPlateInput.value = '';
    calculatePlates();
  }
}

function increasePlate(index) {
  availablePlates[index].count++;
  updatePlateList();
  calculatePlates();
}

function decreasePlate(index) {
  if (availablePlates[index].count > 1) {
    availablePlates[index].count--;
  } else {
    availablePlates.splice(index, 1);
  }
  updatePlateList();
  calculatePlates();
}

function resetPlates() {
  availablePlates = [];
  updatePlateList();
  calculatePlates();
}

function toggleDarkMode() {
  const isDarkMode = document.getElementById('darkModeToggle').checked;
  document.body.classList.toggle('dark-mode', isDarkMode);
  document.querySelectorAll('.card').forEach(card => card.classList.toggle('dark-mode', isDarkMode));
  document.querySelectorAll('input, select, button').forEach(el => el.classList.toggle('dark-mode', isDarkMode));
  document.querySelector('header').classList.toggle('dark-mode', isDarkMode);
  document.querySelector('footer').classList.toggle('dark-mode', isDarkMode);
  document.querySelectorAll('.overlay').forEach(overlay => overlay.classList.toggle('dark-mode', isDarkMode));
  document.querySelectorAll('.plate-visual').forEach(plate => plate.classList.toggle('dark-mode', isDarkMode));
}

// Ensure dark mode toggle reflects the current state on page load
document.addEventListener('DOMContentLoaded', () => {
  const darkModeToggle = document.getElementById('darkModeToggle');
  darkModeToggle.checked = document.body.classList.contains('dark-mode');
});
</script>

</body>
</html>